(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4544aaea"],{"1af6":function(e,t,n){var a=n("63b6");a(a.S,"Array",{isArray:n("9003")})},"75fc":function(e,t,n){"use strict";var a=n("a745"),i=n.n(a);function c(e){if(i()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var r=n("774e"),o=n.n(r),s=n("c8bb"),l=n.n(s);function u(e){if(l()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return o()(e)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(e){return c(e)||u(e)||h()}n.d(t,"a",function(){return d})},"763b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=this,n=t.$createElement,a=t._self._c||n;return a("a-modal",{attrs:{title:"编辑表单",width:"40%",visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:function(){e.visible=!1}}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form-model",t._b({ref:"form",attrs:{model:t.entity,rules:t.rules}},"a-form-model",t.layout,!1),[a("a-form-model-item",{attrs:{label:"角色名",prop:"RoleName"}},[a("a-input",{attrs:{autocomplete:"off"},model:{value:t.entity.RoleName,callback:function(e){t.$set(t.entity,"RoleName",e)},expression:"entity.RoleName"}})],1),a("a-form-model-item",{attrs:{label:"权限",prop:"AppSecret"}},[t.actionsTreeData&&t.actionsTreeData.length?a("a-tree",{attrs:{showLine:"",checkable:"",autoExpandParent:!0,treeData:t.actionsTreeData,defaultExpandAll:!0,checkStrictly:!0},on:{check:t.onCheck},model:{value:t.checkedKeys,callback:function(e){t.checkedKeys=e},expression:"checkedKeys"}}):t._e()],1)],1)],1)],1)},i=[],c=(n("6762"),n("2fdb"),n("ac6a"),n("75fc")),r={getParentIds:function(e,t){var n=[],a=this.findTheNode(e,t);return a.ParentId&&(n.push(a.ParentId),n.push.apply(n,Object(c["a"])(this.getParentIds(a.ParentId,t)))),n},getChildrenIds:function(e,t){var n=this,a=[],i=t.filter(function(t){return t.ParentId==e}).map(function(e){return e.Id});return i.length>0&&(a.push.apply(a,Object(c["a"])(i)),i.forEach(function(e){a.push.apply(a,Object(c["a"])(n.getChildrenIds(e,t)))})),a},findTheNode:function(e,t){return t.filter(function(t){return t.Id==e})[0]}},o=r,s={props:{afterSubmit:{type:Function,default:null}},data:function(){return{layout:{labelCol:{span:5},wrapperCol:{span:18}},visible:!1,confirmLoading:!1,entity:{},actionsTreeData:[],allActionList:[],checkedKeys:{checked:[]},rules:{RoleName:[{required:!0,message:"必填"}]}}},methods:{init:function(){var e=this;this.visible=!0,this.entity={},this.$nextTick(function(){e.$refs["form"].clearValidate()}),this.$http.post("/Base_Manage/Base_Action/GetActionTreeList",{}).then(function(t){t.Success&&(e.actionsTreeData=t.Data)}),this.$http.post("/Base_Manage/Base_Action/GetAllActionList",{}).then(function(t){t.Success&&(e.allActionList=t.Data)})},openForm:function(e){var t=this;this.init(),e&&this.$http.post("/Base_Manage/Base_Role/GetTheData",{id:e}).then(function(e){t.entity=e.Data,t.checkedKeys={checked:t.entity["Actions"]}})},onCheck:function(e,t){var n=this,a=t.node.value,i=[];if(t.checked){var c=o.getParentIds(a,this.allActionList),r=o.getChildrenIds(a,this.allActionList),s=c.concat(r).filter(function(e){return!n.checkedKeys.checked.includes(e)});i=this.checkedKeys.checked.concat(s)}else{r=o.getChildrenIds(a,this.allActionList);r.push(a),i=this.checkedKeys.checked.filter(function(e){return!r.includes(e)})}this.checkedKeys={checked:i}},handleSubmit:function(){var e=this;this.$refs["form"].validate(function(t){t&&(e.confirmLoading=!0,e.entity["Actions"]=e.checkedKeys.checked,e.$http.post("/Base_Manage/Base_Role/SaveData",e.entity).then(function(t){e.confirmLoading=!1,t.Success?(e.$message.success("操作成功!"),e.afterSubmit(),e.visible=!1):e.$message.error(t.Msg)}))})}}},l=s,u=n("2877"),h=Object(u["a"])(l,a,i,!1,null,null,null);t["default"]=h.exports},"774e":function(e,t,n){e.exports=n("d2d5")},a745:function(e,t,n){e.exports=n("f410")},c8bb:function(e,t,n){e.exports=n("54a1")},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray}}]);