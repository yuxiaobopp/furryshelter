(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f83f764","chunk-2d2097b7"],{"06bb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"redo"},on:{click:function(t){return e.init()}}},[e._v("刷新")]),a("a-button",{attrs:{type:"primary",icon:"plus",disabled:!e.hasSelected(),loading:e.loading},on:{click:function(t){return e.openForm(e.selectedRowKeys)}}},[e._v("生成代码")])],1),a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"选择数据库"}},[a("a-select",{on:{change:function(t){return e.onLinkChange()}},model:{value:e.linkId,callback:function(t){e.linkId=t},expression:"linkId"}},e._l(e.dbs,function(t){return a("a-select-option",{key:t.Id},[e._v(e._s(t.LinkName))])}),1)],1)],1)],1)],1)],1),a("a-table",{ref:"table",attrs:{columns:e.columns,rowKey:function(e){return e.TableName},dataSource:e.data,pagination:!1,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},bordered:!0,size:"small"}}),a("edit-form",{ref:"editForm"})],1)},i=[],s=a("a8f0"),o=[{title:"表名",dataIndex:"TableName",width:"20%"},{title:"描述",dataIndex:"Description",width:"20%"},{title:"",dataIndex:"action"}],l={components:{EditForm:s["default"]},mounted:function(){this.init()},data:function(){return{data:[],filters:{},sorter:{field:"Id",order:"asc"},loading:!1,columns:o,queryParam:{},visible:!1,selectedRowKeys:[],dbs:[],linkId:""}},methods:{init:function(){var e=this;this.$http.post("/Base_Manage/BuildCode/GetAllDbLink",{}).then(function(t){e.dbs=t.Data,e.dbs&&e.dbs.length>0&&(e.linkId=e.dbs[0].Id)}).then(function(){e.getDataList()})},getDataList:function(){var e=this;this.selectedRowKeys=[],this.loading=!0,this.$http.post("/Base_Manage/BuildCode/GetDbTableList",{linkId:this.linkId}).then(function(t){e.loading=!1,e.data=t.Data})},onLinkChange:function(e){this.getDataList()},onSelectChange:function(e){this.selectedRowKeys=e},hasSelected:function(){return this.selectedRowKeys.length>0},openForm:function(){this.$refs.editForm.openForm(this.selectedRowKeys,this.linkId)}}},r=l,d=a("2877"),c=Object(d["a"])(r,n,i,!1,null,null,null);t["default"]=c.exports},a8f0:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=this,a=t.$createElement,n=t._self._c||a;return n("a-modal",{attrs:{title:"编辑表单",width:"40%",visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:function(){e.visible=!1}}},[n("a-spin",{attrs:{spinning:t.confirmLoading}},[n("a-form-model",t._b({ref:"form",attrs:{model:t.entity,rules:t.rules}},"a-form-model",t.layout,!1),[n("a-form-model-item",{attrs:{label:"生成类型",prop:"buildTypes"}},[n("a-checkbox-group",{model:{value:t.entity.buildTypes,callback:function(e){t.$set(t.entity,"buildTypes",e)},expression:"entity.buildTypes"}},[n("a-checkbox",{attrs:{value:"0",name:"buildTypes"}},[t._v("实体层")]),n("a-checkbox",{attrs:{value:"1",name:"buildTypes"}},[t._v("业务层")]),n("a-checkbox",{attrs:{value:"2",name:"buildTypes"}},[t._v("接口层")]),n("a-checkbox",{attrs:{value:"3",name:"buildTypes"}},[t._v("页面层")])],1)],1),n("a-form-model-item",{attrs:{label:"生成区域",prop:"areaName"}},[n("a-input",{attrs:{autocomplete:"off"},model:{value:t.entity.areaName,callback:function(e){t.$set(t.entity,"areaName",e)},expression:"entity.areaName"}})],1)],1)],1)],1)},i=[],s={data:function(){return{layout:{labelCol:{span:5},wrapperCol:{span:18}},visible:!1,confirmLoading:!1,entity:{buildTypes:[]},rules:{buildTypes:[{required:!0,message:"必填"}],areaName:[{required:!0,message:"必填"}]}}},methods:{init:function(){var e=this;this.visible=!0,this.entity={buildTypes:["0","1","2","3"]},this.$nextTick(function(){e.$refs["form"].clearValidate()})},openForm:function(e,t){this.init(),this.entity.tables=e,this.entity.linkId=t},handleSubmit:function(){var e=this;this.$refs["form"].validate(function(t){t&&(e.confirmLoading=!0,e.$http.post("/Base_Manage/BuildCode/Build",e.entity).then(function(t){e.confirmLoading=!1,t.Success?(e.$message.success("操作成功!"),e.visible=!1):e.$message.error(t.Msg)}))})}}},o=s,l=a("2877"),r=Object(l["a"])(o,n,i,!1,null,null,null);t["default"]=r.exports}}]);