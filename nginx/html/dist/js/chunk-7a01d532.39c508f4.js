(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a01d532"],{"1af6":function(t,e,a){var n=a("63b6");n(n.S,"Array",{isArray:a("9003")})},"4fac":function(t,e,a){"use strict";var n=a("58c2"),i=a.n(n);i.a},"58c2":function(t,e,a){},"75fc":function(t,e,a){"use strict";var n=a("a745"),i=a.n(n);function r(t){if(i()(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var s=a("774e"),c=a.n(s),o=a("c8bb"),u=a.n(o);function d(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return c()(t)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(t){return r(t)||d(t)||l()}a.d(e,"a",function(){return f})},"774e":function(t,e,a){t.exports=a("d2d5")},a745:function(t,e,a){t.exports=a("f410")},c8bb:function(t,e,a){t.exports=a("54a1")},e62b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-spin",{attrs:{spinning:t.loading}},[a("div",{staticClass:"table-operator"},[a("a-button",{staticClass:"editable-add-btn",attrs:{icon:"plus",type:"default"},on:{click:t.handleAdd}},[t._v("添加权限")])],1),a("a-table",{attrs:{columns:t.columns,dataSource:t.data,bordered:"",size:"small",pagination:!1},scopedSlots:t._u([t._l(["Name","Value"],function(e){return{key:e,fn:function(n,i){return[a("div",{key:e},[i.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}}}):[t._v(t._s(n))]],2)]}}}),{key:"operation",fn:function(e,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a",{on:{click:function(){return t.save(n.key)}}},[t._v("保存")]),a("br"),a("a-popconfirm",{attrs:{title:"确认取消吗?"},on:{confirm:function(){return t.cancel(n.key)}}},[a("a",[t._v("取消")])])],1):a("span",[a("a",{on:{click:function(){return t.edit(n.key)}}},[t._v("编辑")]),t.data.length?a("a-popconfirm",{attrs:{title:"确认删除吗?"},on:{confirm:function(){return t.onDelete(n.key)}}},[a("a",{attrs:{href:"javascript:;"}},[t._v("删除")])]):t._e()],1)])]}}],null,!0)})],1)},i=[],r=(a("ac6a"),a("cebc")),s=a("75fc"),c=a("7ecf"),o=[{title:"权限名",dataIndex:"Name",width:"30%",scopedSlots:{customRender:"Name"}},{title:"权限值(唯一)",dataIndex:"Value",width:"50%",scopedSlots:{customRender:"Value"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],u={data:function(){return{data:[],columns:o,loading:!1,parentId:null}},methods:{handleChange:function(t,e,a){var n=Object(s["a"])(this.data),i=n.filter(function(t){return e===t.key})[0];i&&(i[a]=t,this.data=n)},edit:function(t){var e=Object(s["a"])(this.data),a=e.filter(function(e){return t===e.key})[0];a&&(a.editable=!0,this.data=e)},save:function(t){var e=Object(s["a"])(this.data),a=e.filter(function(e){return t===e.key})[0];a&&(delete a.editable,this.data=e,this.resetCache(e))},cancel:function(t){var e=Object(s["a"])(this.data),a=e.filter(function(e){return t===e.key})[0];a&&(Object.assign(a,this.cacheData.filter(function(e){return t===e.key})[0]),delete a.editable,this.data=e)},onDelete:function(t){var e=Object(s["a"])(this.data);this.data=e.filter(function(e){return e.key!==t})},handleAdd:function(){var t={key:c.v4(),Name:"权限名",Value:"权限值",Type:2,ParentId:this.parentId};this.data=[].concat(Object(s["a"])(this.data),[t])},getPermissionList:function(){return this.data},handleSave:function(){var t=this;this.loading=!0,this.$http.post("/Base_Manage/Base_Action/SavePermission",{parentId:this.parentId,permissionListJson:JSON.stringify(this.data)}).then(function(e){t.loading=!1,e.Success?(t.$message.success("权限设置成功"),t.getDataList()):t.$message.error("操作失败")})},resetCache:function(t){this.cacheData=t.map(function(t){return Object(r["a"])({},t)})},getDataList:function(){var t=this;this.loading=!0,this.$http.post("/Base_Manage/Base_Action/GetPermissionList",{parentId:this.parentId}).then(function(e){t.loading=!1,e.Data.forEach(function(t){return t["key"]=c.v4()}),t.data=e.Data,t.resetCache(t.data)})},init:function(t){this.parentId=t,this.data=[],this.parentId&&this.getDataList()}}},d=u,l=(a("4fac"),a("2877")),f=Object(l["a"])(d,n,i,!1,null,"d27cb9a2",null);e["default"]=f.exports},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray}}]);